분석 방법 및 계획

1. 외부 데이터 수집
KBO리그 야구 데이터 제공 사이트인 'Statiz'에서 추가적인 데이터 확보를 하고자 한다. 'Statiz 홈페이지>기록실>시즌기록실>Playlog' 에서  2018년부터 2021년까지 4시즌의 선수별 각 타석 상황 및 결과, LEV, REa, WPs 등의 값을 크롤링한 후 정제하여 사용하려고 한다. 이 데이터는 대회로부터 제공받은 타구 트래킹 데이터에 병합할 계획이다. 
[출처] http://www.statiz.co.kr/

2. 데이터 전처리
  1) 크롤링 데이터에서 동명이인 선수 및 개명한 선수 38명을 식별, 처리하기 위해 제공받은 Player 데이터를 사용해 각 선수에 PCODE를 할당하였다.
  2) Statiz에서의 수집오류로 타석 상황 데이터가 없는 선수들을 삭제하였다.
  3) 2018-2021 4시즌동안 경기 후반 지명타자로 출전한 투수들의 타석 기록 3,502개 삭제하였다.
  4) 더블 헤더 경기로 인한 동일 날짜 타석 구분을 위한 새로운 지표가 필요하여 G_ID로 부터 날짜, PIT_ID로부터 타석 시각, 이닝, 선수이름을 이용하여 각 타석을 식별하는 지표를 생성한다. 해당 지표를 기준으로 데이터를 병합하고자 한다.

3. 분석 목표
  1) 배럴타구 정의
    a. MLB 정의
      - 각 타구 속도와 발사 각도의 범위를 설정해 범주형 변수로 설정한다.
      - 이 때, Grid Search CV를 이용해 최적의 Hyper Parameter를 선정하여 범위를 적합한 수치로 설정한다.
      ex) 타구속도 10km/h 범위, 발사각도 5º 범위
      - 각 범위에 해당하는 타구들의 결과가 타율이 0.5이상 장타율이 1.5이상인 범위를 배럴의 조건으로 정의한다.
      ex) 타구속도 130~140km/h, 발사각도 20º~25º : 타율 0.6, 장타율 1.7 -> 배럴 O
          타구속도 110~120km/h, 발사각도 20º~25º : 타율 0.3, 장타율 1.1 -> 배럴 X
      - 배럴의 조건을 만족하는 범위조합을 찾아 ~선형회귀분석~을 통해 연속적인 값으로 변환한다.

   b. CBO 정의
      - 앞서 크롤링한 데이터로 각 타석의 상황을 추가한다.
      - 총 24가지 상황별 타석으로 나눠 평균적으로 몇 점을 추가했는지 계산한다. ex) 1사1루 상황에서의 기대 득점 : 0.3점
      - 상황별 타구의 평균득점도 함께 계산한다.
      ex) 1사1루 상황에서 발사각도 30º, 타구속도 140km/h의 타구의 기대득점 : 1.3점
      - 타구의 기대득점이 상황에서의 기대득점보다 높을 경우 배럴로 정의한다.
      - 배럴의 조건을 만족하는 타구를 찾아 ~선형회귀분석~을 통해 연속적인 값으로 변환한다.
      ex) 1사1루 상황에서는 타구속도 130km/h이상, 발사각도 30º이상이 배럴

   2) OPS 예측 방향
      - 종속 변수 : 2021
      
4. EDA
  1) 제공받은 데이터가 담는 정보 확인
  2) 타구속도/발사각도 별 타구결과 분포 확인
  3) 타구 클러스터링 : 배럴타구/준배럴타구/비배럴타구로 그룹을 나눈 뒤, 그룹별 타구속도와 발사각을 비교함. KMeans Clustring을 진행하여 적합한 타구속도/발사각 기준을 제시함.
  4) 지표 자체의 상관관계인 자기상관을 확인함. 자기상관계수가 높을수록 예측력이 높고 이를 변수로 활용하고자 함.
  
5. 모델링
